version: '2.1' 
services:
 zoo1:
  image: mu_zoo
  restart: always
  ports:
    - 2181:2181
  environment:
    ZOO_MY_ID: 1
    ZOO_SERVERS: server.1=zoo1:2888:3888 server.2=zoo2:2888:3888 server.3=zoo3:2888:3888

 zoo2:
  image: mu_zoo
  restart: always
  ports:
   - 2182:2181
  environment:
    ZOO_MY_ID: 2
    ZOO_SERVERS: server.1=zoo1:2888:3888 server.2=zoo2:2888:3888 server.3=zoo3:2888:3888

 zoo3:
   image: mu_zoo
   restart: always
   ports:
     - 2183:2181
   environment:
    ZOO_MY_ID: 3
    ZOO_SERVERS: server.1=zoo1:2888:3888 server.2=zoo2:2888:3888 server.3=zoo3:2888:3888


 kafka:
  image: wurstmeister/kafka
  hostname: kafka
  ports:
    - "9092:9092"
  links: 
    - zoo3:zk
  environment:
   KAFKA_ADVERTISED_HOST_NAME: 138.68.168.237
   KAFKA_ADVERTISED_PORT: 9092
   KAFKA_ZOOKEEPER_CONNECT: 138.68.168.237:2183

 hazelcast:
  build: .  
  #image: hazelcast/hazelcast
  hostname: hz
  ports:
   - "5701:5701"
  links:
    - zoo3:zk
  environment:
    JAVA_OPTS: -Dhazelcast.config=hazelcast.xml
  #networks:
     # - default
     # - innovation_default
 
 hbase:
   image: kevinsvds/hbase
   hostname: hbase
   ports:
     - "9090:9090"
     - "9095:9095"
     - "60000:60000"
     - "60010:60010"
     - "60020:60020"
     - "60030:60030"
   links:
     - zoo3:zk



 trade-injector :
  image : dineshpillai/innovation-trade-injector:0.0.1-SNAPSHOT
  ports : 
   - "8090:8090"
  links :
   - mongo
   - kafka
  environment:
   kafka.bootstrap-servers: 138.68.168.237:9092
   spring.data.mongodb.host: 138.68.168.237
   spring.hazelcast.client.config: mu1-client-config.xml

 mongo:
  image : dineshpillai/mongo-db-repo
  ports :
   - "27017:27017"

#networks:
   # innovation_default:
      #external: true

networks:
  vnet:
    external:
      name: vnet 
